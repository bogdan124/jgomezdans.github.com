<!DOCTYPE html>
<html lang="en">
<head>
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
  "HTML-CSS": {
  styles: {
  ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
  },
  tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']],processEscapes: true}
  });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
        <title>Fast copying of files over the network</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="EO & DA ramblings Atom Feed" />
        
        

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">

<a href="http://github.com/jgomezdans">

<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />

</a>

        <header id="banner" class="body">
                <h1><a href=".">EO & DA ramblings </a></h1>
                <nav><ul>
                
                
                
                
                
                    <li class="active"><a href="./category/blog.html">Blog</a></li>
                
                </ul></nav>
        </header><!-- /#banner -->
        
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="fast-copying-of-files-over-the-network.html" rel="bookmark"
           title="Permalink to Fast copying of files over the network">Fast copying of files over the network</a></h1>
      
    </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2013-05-08T13:00:00">
                Wed 08 May 2013
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href="./author/j-gomez-dans.html">J GÃ³mez-Dans</a>
        </address>
        
<p>In <a href="./category/blog.html">Blog</a>. </p>
<p>tags: <a href="./tag/unix.html">unix</a><a href="./tag/tips.html">tips</a><a href="./tag/meteo.html">meteo</a></p>


</footer><!-- /.post-info -->
      <p>A common requirement when dealing with processing large datasets over
multiple networked machines is to have a local staging space: copy the
data on the local disk to improve access speed and not to bog down a
NFS server when all different processes start accessing different files
all at once in the server. In most cases, such insight is typically achieved
post-facto, so you end up needing to copy all files across to your local
staging directories, resulting in pretty much collapsing all NFS traffic
and servers.</p>
<p>If your network allows this, using <tt class="docutils literal">netcat</tt> can be a good and fast option
for copying the files across. If you are on a trusted network, there's no
need to encrypt traffic, so netcat is appropriate (it's just like <tt class="docutils literal">cat</tt>, but
over the network). First, on the target machine, go to the directory where
you want to copy things, and set up a listener</p>
<pre class="literal-block">
nc -l 7000 | gunzip -v| tar -xvf -
</pre>
<p>In the previous example, I'm placing the listener on port 7000 (other ports could
be used). Note that the output is being piped through <tt class="docutils literal">gunzip</tt> into <tt class="docutils literal">tar</tt>: we
expect that the data will be compressed. On the server, we can issue the command
that packs the files we want to transfer and sends them using <tt class="docutils literal">netcat</tt></p>
<pre class="literal-block">
tar c my_directory/ |gzip --fast -v | nc target 7000
</pre>
<p>In here, we <tt class="docutils literal">tar</tt> and <tt class="docutils literal">gzip</tt> (using the fastest compression to minimise overhead), and
pipe stuff into <tt class="docutils literal">netcat</tt>. <tt class="docutils literal">netcat</tt> will output that stuff to a computer named <tt class="docutils literal">target</tt>
on port 7000, which is where our listener is waiting.</p>

    </div><!-- /.entry-content -->
    

  </article>
</section>

        <section id="extras" class="body">
        
        
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-25702318-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>



</body>
</html>