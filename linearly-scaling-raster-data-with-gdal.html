<!DOCTYPE html>
<html lang="en">
<head>
        <title>Linearly scaling raster data with GDAL</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="./feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="jgomezdans ATOM Feed" />
        

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">

        <header id="banner" class="body">
                <h1><a href=".">jgomezdans </a></h1>
                <nav><ul>
                
                
                
                
                
                    <li class="active"><a href="./category/tips.html">tips</a></li>
                
                </ul></nav>
        </header><!-- /#banner -->
                
<section id="content" class="body">    
<article>
        <header> <h1 class="entry-title"><a href=""
        rel="bookmark" title="Permalink to Linearly scaling raster data with GDAL">Linearly scaling raster data with GDAL</a></h1>  </header>
        <div class="entry-content">
        <footer class="post-info">
        <abbr class="published" title="2012-07-20T13:00:00">
                Fri 20 July 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href="./author/J Gómez-Dans.html">J Gómez-Dans</a>
        </address>
        
<p>In <a href="./category/tips.html">tips</a>. </p>
<p>tags: <a href="./tag/GDAL.html">GDAL</a><a href="./tag/remote sensing.html">remote sensing</a></p>


</footer><!-- /.post-info -->
        <p>So, it's quite tricky to play around with these geospatial datasets: they
have a myriad formats, these keep changing, and you can never know what
metadata will be available in them. A clever way around this situation
is to use tools that allow you to read most of the data, most of the
associated metadata, and that let you do the usual minor tweaks that
you'll require to get things working. And this means GDAL (for rasters)
and OGR (for vectors).</p>
<p>Typical problem: you get some data you've never seen before, and it is
linearly scaled (so they put it in as a 16bit integer and you need to
apply a linear mapping to get the units right as floating point numbers).
In the GDAL mailing list <a class="reference external" href="http://lists.osgeo.org/pipermail/gdal-dev/2012-July/033504.html">there's a thread on this</a>
using the MODIS SST product. Obviously, you need a reasonable file format
that is read easily (this mean GeoTIFF), and you need it in the right
units, as you don't want to remember these things. The easiest way to
accomplish this is to use <tt class="docutils literal">gdal_translate</tt>, with its rather handy
<tt class="docutils literal"><span class="pre">-scale</span> option</tt>, which performs a linear scaling. We'll also want to
change the data type to a floating point number, as otherwise results
will be quantised. From the post above, we know what the linear scaling
is, but we need to convert it</p>
<p>A bash script that loops over these files could be</p>
<div class="highlight"><pre><span class="k">for </span>file in A*L3m_8D_NSST_4 ;
<span class="k">do</span>
<span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;map: $file&quot;</span>
  gdal_translate -of GTiff -ot Float32 <span class="se">\</span>
                      -scale 0 65535 -2. 45. <span class="se">\</span>
                      -a_srs <span class="s2">&quot;EPSG:4326&quot;</span> <span class="se">\</span>
                      -a_nodata 65535  <span class="se">\</span>
                      -a_ullr -180 90 180 -90 <span class="se">\</span>
                      -co <span class="s2">&quot;COMPRESS=PACKBITS&quot;</span> <span class="se">\</span>
                      <span class="s1">&#39;HDF4_SDS:UNKNOWN:&quot;A20030012003008.L3m_8D_NSST_4&quot;:0&#39;</span><span class="se">\</span>
                      A20030012003008.L3m_8D_NSST_4.tif
<span class="k">done</span>
</pre></div>

        </div><!-- /.entry-content -->
        

</article>
</section>

        <section id="extras" class="body">
        
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                        
                            <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
                        
                            <li><a href="http://python.org">Python.org</a></li>
                        
                            <li><a href="http://jinja.pocoo.org">Jinja2</a></li>
                        
                            <li><a href="#">You can modify those links in your config file</a></li>
                        
                        </ul>
                </div><!-- /.blogroll -->
        
        
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="./feeds/all.atom.xml" rel="alternate">atom feed</a></li>
                            

                        
                            <li><a href="#">You can add links in your config file</a></li>
                        
                        </ul>
                </div><!-- /.social -->
        
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->




</body>
</html>